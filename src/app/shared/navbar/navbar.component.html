<nav class="navbar navbar-expand-lg background-primary w-100">
  <div class="container-fluid">
    <!-- Toggler button for collapsed navbar -->
    <button class="navbar-toggler"
            type="button"
            (click)="toggleNavbar()"
            aria-controls="navbarSupportedContent" 
            aria-expanded="false" 
            aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Brand -->
    <a class="navbar-brand position-absolute top-0 start-50 translate-middle-x d-lg-none mt-2" routerLink="/home">
      Activity planner
    </a>
    
    <!-- Left-aligned brand for large screens -->
    <a class="navbar-brand d-none d-lg-block" routerLink="/home">
      Activity planner
    </a>

    <!-- Always-top-right Dark Mode Button -->
    <div class="ms-auto d-lg-none">
      <button class="button-outline-secondary" (click)="toggleDarkMode()">ðŸŒ“</button>
    </div>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent" #navbarCollapse>

      <!-- Left side nav buttons -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <button class="btn" 
                  [ngClass]="{'activated': currentRoute==='/groups'}" 
                  routerLink="/groups" 
                  (click)="changeRoute('/groups')">
            Groups
          </button>
        </li>
        <li class="nav-item d-lg-none">
          <button routerLink="/user" class="btn">User</button>
        </li>
        <li class="nav-item d-lg-none">
          <button class="btn" (click)="openLogoutModal()">Logout</button>
        </li>
      </ul>

      <!-- Right side (only on large screens and up) -->
      <div class="d-none d-lg-flex justify-content-center align-items-center ms-auto gap-2">
        <button routerLink="/user" class="btn">{{userDetails?.username}}</button>
        <button class="btn" (click)="openLogoutModal()">Logout</button>
        <button class="button-outline-secondary" (click)="toggleDarkMode()">ðŸŒ“</button>
      </div>
    </div>
  </div>
</nav>

  <div class="modal-backdrop" *ngIf="showLogoutModal">
    <div class="modal-content">
      <h5>Confirm Logout</h5>
      <p>Are you sure you want to logout?</p>
      <div class="d-flex justify-content-between mt-3">
        <button class="button-secondary" (click)="closeLogoutModal()">Cancel</button>
        <button class="button-danger" (click)="logout()">Logout</button>
      </div>
    </div>
  </div>